<h2>Available Books</h2>

<form method="GET">
  <input name="q" placeholder="Search books..." value="{{ query }}">

  <select name="category">
    <option value="">All Categories</option>
    {% for category in categories %}
      <option value="{{ category }}" {% if category == selected_category %}selected{% endif %}>
        {{ category }}
      </option>
    {% endfor %}
  </select>

  <button type="submit">Search</button>
</form>

<div class="books-list">
  {% for book in books %}
    <div class="book">
      <h3>{{ book.title }}</h3>
      <p>Author: {{ book.author }}</p>
      <p>Category: {{ book.category }}</p>

      <form method="POST" action="{{ url_for('client.add_to_cart', book_id=book.id) }}">
        <input type="hidden" name="action" value="borrow">
        <button type="submit">Borrow</button>
      </form>

      {% if book.price > 0 %}
      <form method="POST" action="{{ url_for('client.add_to_cart', book_id=book.id) }}">
        <input type="hidden" name="action" value="buy">
        <button type="submit">Buy (${{ book.price }})</button>
      </form>
      {% endif %}
    </div>
  {% endfor %}
</div>
